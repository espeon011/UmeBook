# 演習問題 2-2

## 実行方法

```
cargo run <oils_data> <products_data> <output_file>
```

## 実行結果

```
$ cargo run data/oils.csv data/products.csv data/solution.csv
   Compiling solve v0.1.0 (/home/psiana011/Work/UmeBook/ex2_02/solve)
    Finished dev [unoptimized + debuginfo] target(s) in 7.80s
     Running `target/debug/solve data/oils.csv data/products.csv data/solution.csv`
shape: (4, 4)
┌──────────────┬───────┬──────┬────────┐
│ name         ┆ pn    ┆ rvp  ┆ qy_max │
│ ---          ┆ ---   ┆ ---  ┆ ---    │
│ str          ┆ f64   ┆ f64  ┆ i64    │
╞══════════════╪═══════╪══════╪════════╡
│ アルキレート ┆ 107.5 ┆ 5.0  ┆ 3800   │
│ 分解ガソリン ┆ 93.0  ┆ 8.0  ┆ 2652   │
│ 直留ガソリン ┆ 87.0  ┆ 4.0  ┆ 4081   │
│ イソペンタン ┆ 108.0 ┆ 20.5 ┆ 1300   │
└──────────────┴───────┴──────┴────────┘
shape: (4, 4)
┌───────────┬────────┬─────────┬───────┐
│ name      ┆ pn_min ┆ rvp_max ┆ price │
│ ---       ┆ ---    ┆ ---     ┆ ---   │
│ str       ┆ i64    ┆ f64     ┆ f64   │
╞═══════════╪════════╪═════════╪═══════╡
│ unblended ┆ null   ┆ null    ┆ 4.83  │
│ M         ┆ 80     ┆ 7.0     ┆ 4.96  │
│ N         ┆ 91     ┆ 7.0     ┆ 5.85  │
│ Q         ┆ 100    ┆ 7.0     ┆ 6.45  │
└───────────┴────────┴─────────┴───────┘
-------------------------------------------------------------
           Clarabel.rs v0.7.1  -  Clever Acronym

                   (c) Paul Goulart
                University of Oxford, 2022
-------------------------------------------------------------

problem:
  variables     = 16
  constraints   = 26
  nnz(P)        = 0
  nnz(A)        = 56
  cones (total) = 26
    : Nonnegative = 26,  numel = (1,1,1,1,...,1)

settings:
  linear algebra: direct / qdldl, precision: 64 bit
  max iter = 200, time limit = Inf,  max step = 0.990
  tol_feas = 1.0e-8, tol_gap_abs = 1.0e-8, tol_gap_rel = 1.0e-8,
  static reg : on, ϵ1 = 1.0e-8, ϵ2 = 4.9e-32
  dynamic reg: on, ϵ = 1.0e-13, δ = 2.0e-7
  iter refine: on, reltol = 1.0e-13, abstol = 1.0e-12,
               max iter = 10, stop ratio = 5.0
  equilibrate: on, min_scale = 1.0e-5, max_scale = 1.0e5
               max iter = 10

iter    pcost        dcost       gap       pres      dres      k/t        μ       step
---------------------------------------------------------------------------------------------
  0  -3.7341e+04  -7.5499e+04  1.02e+00  8.46e-02  1.13e-02  1.00e+00  2.11e+03   ------
  1  -5.4510e+04  -6.4635e+04  1.86e-01  1.77e-02  1.78e-03  1.12e+02  5.25e+02  8.00e-01
  2  -5.8334e+04  -6.9156e+04  1.86e-01  1.19e-02  8.98e-04  2.67e+02  4.29e+02  3.68e-01
  3  -6.7257e+04  -7.1947e+04  6.97e-02  3.97e-03  2.60e-04  1.53e+02  1.61e+02  6.56e-01
  4  -7.2923e+04  -7.3667e+04  1.02e-02  6.10e-04  3.61e-05  3.25e+01  2.62e+01  8.75e-01
  5  -7.3982e+04  -7.4058e+04  1.03e-03  6.08e-05  3.48e-06  3.20e+00  2.77e+00  8.96e-01
  6  -7.4079e+04  -7.4083e+04  4.50e-05  2.72e-06  1.56e-07  2.24e-01  1.25e-01  9.76e-01
  7  -7.4084e+04  -7.4084e+04  4.52e-07  2.74e-08  1.56e-09  2.25e-03  1.26e-03  9.90e-01
  8  -7.4084e+04  -7.4084e+04  4.52e-09  2.74e-10  1.56e-11  2.26e-05  1.26e-05  9.90e-01
---------------------------------------------------------------------------------------------
Terminated with status = Solved
solve time = 1.882364ms

optimal_value: 74084.4534
shape: (16, 4)
┌──────────────┬───────────┬─────────┬──────────────┐
│ oil          ┆ product   ┆ var_idx ┆ qy(solution) │
│ ---          ┆ ---       ┆ ---     ┆ ---          │
│ str          ┆ str       ┆ u32     ┆ f64          │
╞══════════════╪═══════════╪═════════╪══════════════╡
│ アルキレート ┆ unblended ┆ 0       ┆ 0.0          │
│ アルキレート ┆ N         ┆ 1       ┆ 31.3102      │
│ アルキレート ┆ M         ┆ 2       ┆ 0.0          │
│ アルキレート ┆ Q         ┆ 3       ┆ 3768.6898    │
│ 分解ガソリン ┆ unblended ┆ 4       ┆ 0.0          │
│ …            ┆ …         ┆ …       ┆ …            │
│ 直留ガソリン ┆ Q         ┆ 11      ┆ 1169.499     │
│ イソペンタン ┆ unblended ┆ 12      ┆ 26.5926      │
│ イソペンタン ┆ N         ┆ 13      ┆ 646.4859     │
│ イソペンタン ┆ M         ┆ 14      ┆ 0.0          │
│ イソペンタン ┆ Q         ┆ 15      ┆ 626.9215     │
└──────────────┴───────────┴─────────┴──────────────┘
```
